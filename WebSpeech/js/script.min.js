const{speechSynthesis:speechSynthesis}=window,voicesSelect=document.querySelector("#voices"),langSelect=document.querySelector("#langs"),rate=document.querySelector("#rate"),pitch=document.querySelector("#pitch"),text=document.querySelector("#text");let someLang="ru-RU",voices=[],langs=[];const generateVoices=()=>{voices=speechSynthesis.getVoices(),console.log(voices);const e=voices.map((e,t)=>e.lang===someLang&&`<option value=${t}>${e.name} (${e.lang})</option>`).join("");voicesSelect.innerHTML=e},newLang=()=>{someLang=langSelect.value,generateVoices()},generateLangs=()=>{langs=speechSynthesis.getVoices();const e=langs.map((e,t)=>`<option>${e.lang}</option>`);langSelect.innerHTML=Array.from(new Set(e)).join("")},speak=()=>{if(!speechSynthesis.speaking&&""!==text.value){const e=new SpeechSynthesisUtterance(text.value);e.voice=voices[voicesSelect.value],e.pitch=pitch.value,e.rate=rate.value,speechSynthesis.speak(e)}};generateVoices(),generateLangs(),document.querySelector("#btn-stop").addEventListener("click",()=>speechSynthesis.cancel()),document.querySelector("#btn-start").addEventListener("click",speak),rate.addEventListener("change",()=>document.querySelector(".rate-value").textContent=rate.value),pitch.addEventListener("change",()=>document.querySelector(".pitch-value").textContent=pitch.value),langSelect.addEventListener("change",newLang),voicesSelect.addEventListener("change",speak),speechSynthesis.addEventListener("voiceschanged",generateVoices),speechSynthesis.addEventListener("voiceschanged",generateLangs);